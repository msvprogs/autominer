function MessageBox(){}function Clipboard(){}function Notification(n){this.body=n}function AjaxOperationControl(n){this.element=n;this.previousHtml=null}function JsonFileReader(n){var t=$("<input>").attr({type:"file",accept:".json"}).css("display","none").appendTo($(n).parent());n.click(function(){t.click()});this.button=n;this.input=t}function bindDisableButton(n,t,i){bindButtonPostAction(n,"disable-url",function(n,r){var u=n.closest("tr");new Notification(format("Activity of {0} {1} has been updated",i,u.data(t))).success();u.replaceWith(r)},function(n,t){new Notification(format("Error while changing {0} status: {1}",i,t)).danger()})}function bindDeleteButton(n,t,i){var r=i.substr(0,1).toUpperCase()+i.substr(1);bindButtonPostAction(n,"delete-url",function(n){var i=n.closest("tr");new Notification(format("{0} {1} has been deleted",r,i.data(t))).success();i.remove()},function(n,t){new Notification(format("Error while deleting {0}: {1}",i,t)).danger()},function(n,r){var u=n.closest("tr");MessageBox.confirm(format("Delete {0} {1}?",i,u.data(t)),format("You are going to delete {0} {1}. Are you sure?",i,u.data(t)),function(n){n&&r()})})}function bindButtonPostAction(n,t,i,r,u){n.on("click",format("button[data-{0}]",t),function(n){var f=$(n.currentTarget),e=function(){var n=new AjaxOperationControl(f);n.disable()&&$.ajax({url:f.data(t),method:"post",disableThrobber:!0}).done(function(t){i(f,t);n.enable()}).fail(function(t,i,u){r(f,u);n.enable()})};if(u===undefined){e();return}u(f,e)})}function bindRowFormPostAction(n,t,i,r,u,f,e){n.on("click",format("button[data-action='{0}']",t),function(n){e($(n.currentTarget).closest("tr"))});$(format("form#{0}",i)).submit(function(n){n.preventDefault();var t=$(this),e=t.find(format("input#{0}",r)).val(),i=$(format("tr[data-row-id='{0}']",e));$.ajax({url:t.attr("action"),method:"post",data:t.serialize()}).done(function(n){u(i,n)}).fail(function(n,t,r){f(i,r)})})}function showModal(n,t){var i=$("<div>").prependTo("body");i.load(n,null,function(){i.find(".modal").modal("show")});i.on("hidden.bs.modal",function(){t!==undefined&&t(i);i.off();i.remove()})}function showConfirm(n,t){showModal(n,function(n){t(n.find(".modal").data("result")===!0)})}function confirmAndPost(n){showConfirm(n,function(t){t&&$("<form>").appendTo("body").attr({action:n,method:"post"}).submit()})}function format(n){arguments.slice=[].slice;var t=arguments.slice(1);return n.replace(/\{\d+\}/g,function(n){var i=parseInt(n.substr(1,n.length-2));return t[i]!==undefined?t[i].toString():""})}function isNullOrWhitespace(n){return n===null||n===undefined||$.trim(n)===""}function padLeftWithZeroes(n,t){for(var i=n.toString(),u=i.length,r=0;r<t-u;r++)i="0"+i;return i}MessageBox.alert=function(n,t,i,r){var u,f;n=n||"Alert";t=t||"info";i=i||"";$("#alertDialogTitle").html(n);switch(t.toLowerCase()){case"info":u="fa-info-circle";break;case"warning":u="fa-exclamation-triangle";break;default:u=""}$("#alertDialogIcon").addClass("fa").addClass(u);$("#alertDialogBody").html(i);r!==undefined&&(f=$("#alertDialogOkButton"),f.click(function(){r();f.off("click")}));$("#alertDialog").modal("show")};MessageBox.confirm=function(n,t,i){var r,u,f;n=n||"Confirm";t=t||"";i=i||function(){};$("#confirmDialogTitle").html(n);$("#confirmDialogBody").html(t);r=$("#confirmDialogYesButton");r.click(function(){i(!0);r.off("click")});u=$("#confirmDialogNoButton");u.click(function(){i(!1);u.off("click")});f=$("#confirmDialog");f.modal("show")};Clipboard.setText=function(n,t,i){var r=$("<input>").css({position:"absolute",left:"-999px"}).appendTo($(document.body));r.val(n).select();try{document.execCommand("copy");t!==undefined&&t()}catch(u){i!==undefined&&i()}finally{r.remove()}};Notification.prototype.success=function(){$.notify({message:this.body},{type:"success"})};Notification.prototype.info=function(){$.notify({message:this.body},{type:"info"})};Notification.prototype.warning=function(){$.notify({message:this.body},{type:"warning"})};Notification.prototype.danger=function(){$.notify({message:this.body},{type:"danger"})};AjaxOperationControl.prototype.disable=function(){if(this.element.prop("disabled"))return!1;this.previousHtml=this.element.html();this.element.css({width:this.element.outerWidth(),height:this.element.outerHeight()});var n=$("<img>").attr({alt:"...",src:"/images/ajax-loader-small.gif"}).css({width:"14px",height:"14px"});return this.element.empty().append(n).prop("disabled",!0),!0};AjaxOperationControl.prototype.enable=function(){return this.element.prop("disabled")?(this.element.css({width:null,height:null}),this.element.html(this.previousHtml).prop("disabled",!1),!0):!1};JsonFileReader.prototype.subscribe=function(n){this.input.change(function(){var t,i;if(!window.File||!window.FileReader){new Notification("Your browser doesn't support local file loading").danger();return}(t=$(this).prop("files")[0],t!==undefined&&t!==null)&&(i=new FileReader,i.onload=function(){var t;try{t=JSON.parse(i.result)}catch(r){new Notification("Couldn't parse the selected file: "+r.message).danger();return}n(t)},i.readAsText(t))})};$(function(){$("form[data-confirm-body]").submit(function(n){var t=$(this);t.data("confirmed")||(MessageBox.confirm(t.data("confirm-title")||"Confirmation",t.data("confirm-body"),function(n){n&&(t.data("confirmed",!0),t.submit())}),n.preventDefault())});$("table.sticky-header").floatThead({scrollingTop:48});$(document).ajaxSend(function(n,t,i){i.disableThrobber||$("#throbber").show()});$(document).ajaxComplete(function(n,t,i){i.disableThrobber||$("#throbber").hide()});$("li.disabled, li.active").click(function(n){n.preventDefault()});$("button[data-long-id]").click(function(){var n=$(this);Clipboard.setText(n.data("long-id"),function(){n.addClass("btn-success");setTimeout(function(){n.removeClass("btn-success")},1200)},function(){n.addClass("btn-danger");setTimeout(function(){n.removeClass("btn-danger")},1200)})});$("[data-timestamp]").each(function(n,t){var i=new Date(parseInt($(t).data("timestamp")));$(t).attr("title",format("{0} {1}",i.toLocaleDateString(),i.toLocaleTimeString()))});$("div[data-type='datetimepicker']").datetimepicker({format:"DD.MM.YYYY"});$("select[data-type='datePeriodPresetSelector']").change(function(){var i=$(this).closest("ul"),u=i.find("input[name='fromDate']"),f=i.find("input[name='toDate']"),r=$(this).prop("selectedIndex"),n,t;if(!(r<0)){n=new Date;t=new Date;switch($(this).prop("options")[r].value){case"Yesterday":n.addDays(-1);t.addDays(-1);break;case"LastWeek":n.addDays(-7);break;case"LastTwoWeeks":n.addDays(-14);break;case"ThisMonth":n=new Date(n.getFullYear(),n.getMonth(),1);break;case"ThisYear":n=new Date(n.getFullYear(),0,1)}u.val(n.toStringFormatted());f.val(t.toStringFormatted())}});$("input[type=file]").bootstrapFileInput();bindDisableButton($("tbody#coins-table"),"coin-name","coin");bindDeleteButton($("tbody#coins-table"),"coin-name","coin");$("select#NetworkInfoApiType").change(function(){var e=$("input#NetworkApiUrl"),u=$("#apiUrlDescription"),o=$("input#NetworkApiName"),f=$("#apiCoinNameDescription");if(u.empty(),f.empty(),!(this.selectedIndex<0)){var r=!1,n=!1,t=null,i=null;switch(this.options[this.selectedIndex].value){case"JsonRpc":t="Local node URL will be used";break;case"Insight":r=!0;t="Load the main page of block explorer and find through Fiddler or browser instruments the URL ending with <i>status?q=getInfo<\/i>";break;case"Iquidus":case"IquidusWithPos":r=!0;t="In most cases it is the URL of the explorer main page, but it's recommended to check the API page for actual URLs (of course, if there are localhost addresses, they're not actual)";break;case"OpenEthereumPool":r=!0;t="URL of the 'stats' API method (extract it with Fiddler or browser's network activity recorder)";break;case"ProHashing":n=!0;i="Coin name from selector on <a href='https://prohashing.com/explorer/'>this<\/a> page";break;case"TheBlockFactory":n=!0;i="First part of the pool host name, example: <i><b>orb<\/b>.theblocksfactory.com<\/i>";break;case"TheCryptoChat":n=!0;i="First part of the explorer host name, example: <i><b>honey<\/b>.thecryptochat.net<\/i>";break;case"Altmix":n=!0;i="Last section of the explorer URL, example: <i>https://altmix.org/coins/<b>28-Scorecoin<\/b><\/i>"}e.prop("disabled",!r);u.html(t);o.prop("disabled",!n);f.html(i)}});$("select#NetworkInfoApiType").change();$("select#AddressFormat").change(function(){var r=$("input#AddressPrefixes"),i=$("#addressSample"),t,n;if(i.empty(),!(this.selectedIndex<0)){t=!1;n=null;switch(this.options[this.selectedIndex].value){case"Base58Check":t=!0;n="BP7Ci6v1S1PDw4i2HFLMv2v9wyBa7mQAgS";break;case"EthereumHex":n="0x00EB5678228c31e0AC08381d26A00d1eDc9e49b6 (pay attention to letters' case, it serves as a checksum)"}r.prop("disabled",!t);i.text(n)}});$("select#AddressFormat").change();bindDisableButton($("tbody#pools-table"),"pool-name","pool");bindDeleteButton($("tbody#pools-table"),"pool-name","pool");$("select#PoolApiProtocol").change(function(){var a=$("input#ApiUrl"),e=$("#poolApiUrlDescription"),v=$("input#ApiKey"),o=$("#poolApiKeyDescription"),y=$("input#ApiPoolName"),s=$("#poolApiPoolNameDescription"),p=$("input#ApiPoolUserId"),h=$("#poolApiUserIdDescription");if(e.empty(),o.empty(),s.empty(),h.empty(),!(this.selectedIndex<0)){var t=!1,i=!1,r=!1,c=!1,n=null,u=null,f=null,l=null;switch(this.options[this.selectedIndex].value){case"Qwak":t=i=c=!0;n="Navigate to <i>My Account -> Edit Account<\/i> and find there a hyperlink with API key. <br />Example: <i>https://oc.suprnova.cc/index.php?page=api&action=getuserstatus&api_key=some-long-number&id=513350<\/i><br />This is an API URL (without query string, e.g. only this part: <b>https://oc.suprnova.cc/index.php<\/b>)";u="The value of <var>api_key<\/var> parameter of the API hyperlink URL";l="The value of <var>id<\/var> parameter of the API hyperlink URL. May be empty if there is no such parameter.";break;case"Tbf":t=i=!0;n="Navigate to <i>My Account -> Account Details<\/i> and find there a hyperlink with API key. <br />Example: <i>https://orb.theblocksfactory.com/api.php?api_key=some-big-number<\/i><br />This is an API URL (without query string, e.g. only this part: <b>https://orb.theblocksfactory.com/api.php<\/b>)";u="The value of <var>api_key<\/var> parameter of the API hyperlink URL";break;case"OpenEthereum":t=!0;n="";break;case"Bitfly":t=!0;n="API URL can be found in the API documentation of the pool";break;case"NodeOpenMiningPortal":t=r=!0;n="URL of the 'API' button or menu item";f="Open 'Tab Stats' page and reference 'Pool Name' column";break;case"JsonRpcWallet":n="Local node URL and credentials will be taken from coin options";break;case"Yiimp":t=r=!0;n="Reference the API documentation of the pool (Links section). Example for yiimp.eu pool: <i>http://api.yiimp.eu/api<\/i>";f="Coin algorithm name. Reference 'Algo' column on the main page. Example: <i>skein<\/i>"}a.prop("disabled",!t);e.html(n);v.prop("disabled",!i);o.html(u);y.prop("disabled",!r);s.html(f);p.prop("disabled",!c);h.html(l)}});$("select#PoolApiProtocol").change();bindDisableButton($("tbody#wallets-table"),"wallet-name","wallet");bindDeleteButton($("tbody#wallets-table"),"wallet-name","wallet");bindButtonPostAction($("tbody#wallets-table"),"set-as-target-url",function(n,t){var i=n.closest("tr");new Notification(format("Wallet {0} has been set as mining target for {1}",i.data("wallet-name"),i.data("coin-name"))).success();$(format("tr[data-coin-id='{0}']",i.data("coin-id"))).not(i).remove();i.replaceWith(t)},function(n,t){new Notification(format("Error while setting the new mining target: {0}",t)).danger()});bindDisableButton($("tbody#exchanges-table"),"exchange-name","exchange");bindDeleteButton($("tbody#exchanges-table"),"exchange-name","exchange");bindRowFormPostAction($("tbody#exchanges-table"),"register-keys","editKeysForm","exchangeInput",function(n,t){$("#editKeysDialog").modal("hide");new Notification(format("Keys for exchange {0} have been registered successfully",n.data("exchange-name"))).success();n.replaceWith(t)},function(n,t){$("#editKeysDialog").modal("hide");new Notification(format("Error while registering keys: {0}",t)).danger()},function(n){var t=n.data("exchange-name");$("#editKeysExchange").text(t);$("#exchangeInput").val(t);$("#publicKeyInput").val("");$("#privateKeyInput").val("");$("#editKeysDialog").modal("show")});bindDisableButton($("tbody#rigs-table"),"rig-name","rig");bindDeleteButton($("tbody#rigs-table"),"rig-name","rig");bindButtonPostAction($("tbody#rigs-table"),"revoke-certificate-url",function(n,t){var i=n.closest("tr");new Notification(format("Certificate for rig {0} has been revoked",i.data("rig-name"))).success();i.replaceWith(t)},function(n,t){new Notification(format("Error while revoking certificate: {0}",t)).danger()},function(n,t){var i=n.closest("tr");MessageBox.confirm(format("Revoke certificate for rig {0}?",i.data("rig-name")),format("You are going to revoke certificate for rig {0}. Are you sure? It will no longer be able to connect to the control center.",i.data("rig-name")),function(n){n&&t()})});bindButtonPostAction($("tbody#rigs-table"),"register-url",function(n,t){var i=n.closest("tr");MessageBox.alert(format("Register rig {0}",i.data("rig-name")),"info",t)},function(n,t){new Notification(format("Error while registering rig: {0}",t)).danger()});bindDisableButton($("tbody#users-table"),"user-name","user");bindDeleteButton($("tbody#users-table"),"user-name","user");bindDeleteButton($("tbody#algorithms-table"),"algorithm-name","algorithm");bindDisableButton($("tbody#miners-table"),"miner-name","miner");bindDeleteButton($("tbody#miners-table"),"miner-name","miner")});Date.prototype.addDays=function(n){return this.setDate(this.getDate()+n)};Date.prototype.toStringFormatted=function(){return format("{0}.{1}.{2}",padLeftWithZeroes(this.getDate(),2),padLeftWithZeroes(this.getMonth()+1,2),padLeftWithZeroes(this.getFullYear(),4))};